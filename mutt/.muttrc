set folder      = ~/.mail
set realname    = "Anton Lindstrom"
set signature   = ~/.mutt/signature

# Alternative emails
alternates (anton@(alley.se|antonlindstrom.com|lindstrom.sh|codezoic.com)|me@antonlindstrom.com|lindstrom.anton@outlook.com)
set reverse_name

set envelope_from = yes

# Store message headers locally to speed things up.
# If hcache is a folder, Mutt will create sub cache folders for each account which may speeds things even more up.
set header_cache = ~/.cache/mutt

# Store messages locally to speed things up, like searching message bodies.
# Can be the same folder as header_cache.
# This will cost important disk usage according to your e-mail amount.
set message_cachedir = "~/.mutt/cache/bodies"

# Beeping will enable urgency hints.
set beep_new

set mail_check = 30
set wait_key = no        # shut up, mutt
set mbox_type = Maildir  # mailbox type
set timeout = 3          # idle time before scanning
set mail_check = 0       # minimum time between scans
unset move               # gmail does that

set uncollapse_jump

# Binding
bind index <esc>1 next-unread-mailbox

# Index Key Bindings ---------------------------------
bind index gg       first-entry
bind index G        last-entry

bind index R        group-reply
bind index <tab>    sync-mailbox
bind index <space>  collapse-thread

# Ctrl-R to mark all as read
macro index \Cr "T~U<enter><tag-prefix><clear-flag>N<untag-pattern>.<enter>" "mark all messages as read"

# Sync email
macro index O "<shell-escape>offlineimap<enter>"           "run offlineimap to sync all mail"
macro index o "<shell-escape>offlineimap -qf INBOX<enter>" "run offlineimap to sync inbox"

# Saner copy/move dialogs
macro index C "<copy-message>?<toggle-mailboxes>" "copy a message to a mailbox"
macro index M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"

macro index,pager I  <set-flag>O  "Mark as read"
macro index,pager U  <set-flag>N  "Mark as new"
#macro index,pager U  <clear-flag>O  "Mark as unread"

# Filter out some headers
ignore *
unignore from: subject: to: date:
unhdr_order *                           # some distros order things by default
hdr_order to: from: date: subject:

# View HTML automatically
auto_view text/html

# Set enter to view with mailcap.
bind attach <return>    view-mailcap

# Display download progress every 5K
set net_inc=5

set pager_stop
set markers=no
set mark_old=no

# Sorting
set sort = 'threads'
set sort_aux = last-date-received

set date_format = "%b %d"
set index_format = "[%Z]  %D %-20.20F  %s"

set status_chars  = " *%A"
set status_format = "───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?o? (%o old)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"

# Sidebar Patch --------------------------------------
set sidebar_visible    = no
set sidebar_width      = 50
set sidebar_short_path = no
# color sidebar_new color221 color233

#
# b toggles sidebar visibility
bind index,pager B sidebar-toggle-visible

# ctrl-n, ctrl-p to select next, prev folder
# # ctrl-o to open selected folder
bind index,pager \CP sidebar-prev
bind index,pager \CN sidebar-next
bind index,pager \CO sidebar-open

# Default inbox.
set spoolfile = "+anton@lindstrom.sh/INBOX"

source ~/.mutt/accounts/anton@lindstrom.sh

folder-hook anton@lindstrom.sh/*           source ~/.mutt/accounts/anton@lindstrom.sh
folder-hook lindstrom.anton@outlook.com/*  source ~/.mutt/accounts/lindstrom.anton@outlook.com
folder-hook antonlindstrom.com/*           source ~/.mutt/accounts/antonlindstrom.com

# Get mailboxes
source ~/.mutt/mailboxes

# Mailcap path
set mailcap_path  = ~/.mutt/mailcap

# Alias file
set alias_file = ~/.mail_aliases
set sort_alias = alias
set reverse_alias = yes
source $alias_file

# Set preference of text/plain
alternative_order text/plain text/enriched text/html

# Solarized theme
# source $HOME/.mutt/mutt-colors-solarized-dark-256.muttrc
# source $HOME/.mutt/mutt-colors-solarized-dark-16.muttrc
source ~/.mutt/mutt-patch-highlighting.muttrc

color status        blue            black
color indicator     brightcyan      black

color index         yellow          default         "~N"                        # new messages
color index         default         red             "~D"                        # deleted messages
color index         red             default         "~F"                        # flagged messages

color hdrdefault    green           default
color header        brightgreen     default         "^(From)"
color header        blue            default         "^(Subject)"

color quoted        blue            default
color quoted1       cyan            default
color quoted2       yellow          default
color quoted3       red             default
color quoted4       brightred       default

# Last, but not least, get mutt to display its version on startup.
push <show-version>
